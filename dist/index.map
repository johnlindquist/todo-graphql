{"version":3,"sources":["resolvers.js","todos.js","index.js"],"names":["Todo","parent","args","todos","parentId","getById","value","children","filter","todo","id","Query","allTodos","searchTodos","term","name","match","RegExp","Mutation","reset","hardReset","addTodo","insert","done","write","addParent","update","toggleDone","removeTodo","remove","db","FileSync","_","mixin","lodashId","seed","map","i","array","createId","defaults","get","startState","set","pubsub","PubSub","server","ApolloServer","typeDefs","resolvers","context","listen"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"index.map","sourceRoot":"..","sourcesContent":["export default {\n  Todo: {\n    parent: (parent, args, { todos }) =>\n      parent.parentId\n        ? todos.getById(parent.parentId).value()\n        : null,\n    children: (parent, args, { todos }) =>\n      todos\n        .filter(todo => todo.parentId === parent.id)\n        .value()\n  },\n  Query: {\n    allTodos: (parent, args, { todos }) => todos.value(),\n    searchTodos: (parent, { term }, { todos }) =>\n      todos\n        .filter(todo =>\n          todo.name.match(new RegExp(`.*${term}.*`, \"i\"))\n        )\n        .value()\n  },\n  Mutation: {\n    reset: (parent, args, { todos }) => todos.reset(),\n    reset: (parent, args, { todos }) => todos.hardReset(),\n    addTodo: (parent, { name }, { todos }) =>\n      todos\n        .insert({\n          name,\n          done: false\n        })\n        .write(),\n    addParent: (parent, { id, parentId }, { todos }) => {\n      return todos\n        .getById(id)\n        .update(\"parentId\", () => parentId)\n        .write()\n    },\n    toggleDone: (parent, { id }, { todos }) => {\n      return todos\n        .getById(id)\n        .update(\"done\", done => !done)\n        .write()\n    },\n    removeTodo: (parent, { id }, { todos }) => {\n      return todos.remove(todo => todo.id === id).write()\n    }\n  }\n}\n","import low from \"lowdb\"\nimport FileSync from \"lowdb/adapters/FileSync\"\nimport lodashId from \"lodash-id\"\n\nconst db = low(new FileSync(\"db.json\"))\ndb._.mixin(lodashId)\n\nconst seed = [\"Eat\", \"Sleep\", \"Code\"]\n  .map(name => ({ name, done: false, parentId: null }))\n  .map((todo, i, array) => ({\n    ...todo,\n    id: db._.createId(array, todo)\n  }))\n\nconst todos = db\n  .defaults({\n    todos: seed\n  })\n  .get(\"todos\")\n\nconst startState = [...todos.value()]\n\ntodos.reset = () => {\n  db.set(\"todos\", [...startState]).write()\n\n  return todos.value()\n}\n\ntodos.hardReset = () => {\n  db.set(\"todos\", [...seed]).write()\n\n  return todos.value()\n}\n\nexport default todos\n","import typeDefs from \"./typeDefs.graphql\"\nimport resolvers from \"./resolvers\"\nimport { ApolloServer, PubSub } from \"apollo-server\"\nimport todos from \"./todos\"\n\nconst pubsub = new PubSub()\n\nconst server = new ApolloServer({\n  typeDefs,\n  resolvers,\n  context: { todos, pubsub }\n})\n\nserver.listen(4000)\n"]}